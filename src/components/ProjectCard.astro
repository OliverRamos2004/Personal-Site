---
const { title, description, tech, link, media } = Astro.props;

/**
 * Expected shapes:
 * media = { type: "image", src: "/projects/x.png", alt?: "..."}
 * media = { type: "video", src: "/projects/x.mp4", poster?: "/projects/x.jpg" }
 */
---

<article
  class="rounded-2xl border p-6 transition hover:shadow-lg hover:-translate-y-1"
>
  <h3 class="text-lg font-semibold">{title}</h3>
  <p class="mt-2 text-sm text-neutral-700">{description}</p>
  <p class="mt-3 text-xs text-neutral-500">
    <span class="font-medium text-neutral-600">Tech:</span>
    {tech}
  </p>

  {/* MEDIA takes priority; if no media, fall back to link */}
  {
    media ? (
      <div class="mt-4">
        {media.type === 'image' ? (
          <img
            src={media.src}
            alt={media.alt ?? `${title} screenshot`}
            class="w-full rounded-lg border"
            loading="lazy"
          />
        ) : media.type === 'video' ? (
          <video
            class="w-full rounded-lg border"
            src={media.src}
            poster={media.poster}
            controls
            playsinline
          />
        ) : null}
      </div>
    ) : link ? (
      <a
        href={link}
        target="_blank"
        rel="noopener noreferrer"
        class="mt-4 inline-block rounded-lg border px-4 py-1.5 text-sm font-medium transition hover:bg-black hover:text-white, justify-"
      >
        View Project
      </a>
    ) : null
  }
</article>
